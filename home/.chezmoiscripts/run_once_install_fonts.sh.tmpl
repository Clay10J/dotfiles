#!/usr/bin/env bash
set -e

# Only run on Linux hosts
if [ "$(uname -s)" != "Linux" ]; then
  exit 0
fi

# Where we‚Äôll clone the Nerd Fonts repo
FONT_REPO="$HOME/.nerd-fonts"

# Check if any of the three fonts are already installed
if ! fc-list | grep -Eq 'CaskaydiaCove Nerd Font|MapleMono Nerd Font|Iosevka Nerd Font'; then
  echo "üîΩ Installing Nerd Fonts: CaskaydiaCove, MapleMono, Iosevka"

  # Clean out any old clone
  rm -rf "$FONT_REPO"
  git clone --depth 1 https://github.com/ryanoasis/nerd-fonts.git "$FONT_REPO"

  # Run the install script for just those three
  "$FONT_REPO/install.sh" CaskaydiaCove MapleMono Iosevka

  # Refresh font cache (user‚Äêlocal)
  fc-cache -f "$HOME/.local/share/fonts"
fi
