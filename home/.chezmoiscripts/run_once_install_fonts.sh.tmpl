#!/usr/bin/env bash
set -e

# Only run on Linux hosts
if [ "$(uname -s)" != "Linux" ]; then
  exit 0
fi

FONT_DIR="$HOME/.local/share/fonts"
mkdir -p "$FONT_DIR"

# 1) Install CascadiaCode and Iosevka from the official Nerd Fonts releases
NERD_BASE_URL="https://github.com/ryanoasis/nerd-fonts/releases/latest/download"
for family in CascadiaCode Iosevka; do
  echo "ðŸ”½ Installing Nerd Font: $family"
  curl -fsSL "$NERD_BASE_URL/${family}.zip" -o "$FONT_DIR/${family}.zip"
  unzip -o "$FONT_DIR/${family}.zip" -d "$FONT_DIR"
done

# 2) Install Maple Mono NF from its own repo
echo "ðŸ”½ Installing Maple Mono NF"
MAPLE_URL="https://github.com/subframe7536/maple-font/releases/latest/download/MapleMono-NF-unhinted.zip"
curl -fsSL "$MAPLE_URL" -o "$FONT_DIR/MapleMono.zip"
unzip -o "$FONT_DIR/MapleMono.zip" -d "$FONT_DIR"

# 3) Clean up zip files
rm -f "$FONT_DIR"/*.zip

# 4) Refresh the font cache
fc-cache -f "$FONT_DIR"
